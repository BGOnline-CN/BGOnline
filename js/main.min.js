// APP START
var jq = $.noConflict();
var bgoApp = angular.module('bgoApp', []);

// bgoCtrl
bgoApp.controller('bgoCtrl', ['$scope', '$http', 
  function($scope, $http){
     
    $scope.site = {
      description: '',
      keywords: '软件开发, 项目外包, 响应式, APP, html5, css3, javascript, jQuery, bootstrap, angularJS, sass, less, PHP, .net, c#, c++, java, Android, ios',
      name: 'BGONLINE.CN'
    }
    $scope.site.title = '冰果在线（'+ $scope.site.name +'） - 专业软件开发、定制、项目外包、稳定极速！' 

    var animation = (function(_index) { // 动画函数

      this.header = (function() {
        jq('body').scrollspy({ target: '.navbar' })
        jq('.navbar-nav li a').click(function() {
          jq('html').animate({
            scrollTop: jq(jq(this).attr('href')).offset().top
          }, 800);
        })
      })

      this.home = (function() { 
        jq('.banner-bg').animate({ 
          right: 0 
        }, 'slow');
      })

      this.advantage = (function() {
        var advantageLi = jq('.advantage ul li');
        advantageLi.eq(_index).animate({
          right: 0,
          opacity: '1',
        }, 'slow', function() {
          anime.advantage(++_index);
        })
      }) 

      this.getScrollTop = function() { // 获取页面高度
          var scrollTop = 0;
          if(document.documentElement && document.documentElement.scrollTop) {
              scrollTop = document.documentElement.scrollTop;
          }else if(document.body) {
              scrollTop = document.body.scrollTop;
          }
          return scrollTop;
      }
      
    })

    var anime = new animation(0);

    var init = (function() {

      var aScreen = 0;
      var bScreen = 180;
      var cScreen = 800;
      anime.header();     
      // alert(anime.getScrollTop()) 
      timer = setInterval(function() {
        if( anime.getScrollTop() >= aScreen ) { anime.home(); }
        if( anime.getScrollTop() > bScreen ) { anime.advantage(); }
        if( anime.getScrollTop() > cScreen ) { clearInterval(timer); }
      }, 100);
      
    })();
    
}]);

